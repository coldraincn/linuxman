# 权限管理

## acl

### 查看acl

```shell
getgacl 文件名
```

### 设置acl权限

```shell
setfacl [选项] [u:用户名:权限] [文件名]
```

* -m 设定acl
* -x删除指定权限
* -b 删除所有权限
* -d 设定默认acl
* -k 删除默认
* -R 递归设定

## 文件特殊权限

### setUID

```shell
chmod 4755 文件名
chmod u+s 文件名
```

```shell
chmod 755 文件名
chmod u-s 文件名
```

* 只有二进制文件才能设定
* 命令执行者要对该程序拥有执行权限
* 命令执行者在执行时获取文件owner的身份
* SetUID只有执行过程中有效

### SetGID

```shell
chmod 2755 文件名
chmod g+s 文件名
```

文件：

* 只有二进制文件才能设定
* 命令执行者要对该程序拥有执行权限
* 命令执行者在执行时获取文件group的身份
* 只有执行过程中有效

目录：

* 普通用户必须对目录有r和x权限
* 普通用户在此目录的有效组变成目录的属组
* 普通用户对目录拥有w权限时，新建文件的默认属组时这个目录的属组

### SBIT

```shell
chmod 1755 目录
chmod o+t 目录
```

* 只对目录有效
* 普通用户对该目录有w和x，则普通用户可以在此目录有写入权限
* 但不能删除其他用户建立的文件
  
### chattr

```shell
chattr [+-=][选项][文件或目录]
```

* i 文件：不允许修改删除添加；目录，只能修改目录下文件，不能建立和删除
* a 文件：只能增加数据；目录：只能建立和修改文件

### lsattr

```shell
lsattr 选项 文件名
```

* -a 显示所有文件和目录
* -d 如果时目录，仅列出目录本身的属性

## sudo

* 把只能root用户执行的命令赋予普通用户
* 操作对象时系统命令

### visudo

>实际修改/etc/sudoers文件

### sudo -l

>查看可用的sudo命令